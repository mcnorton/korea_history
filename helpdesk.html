<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>한국역사연표</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;color:#333}.container{width:100%;max-width:500px}.form-card{background:white;border-radius:20px;padding:40px;box-shadow:0 20px 40px rgba(0,0,0,.1)}.header{text-align:center;margin-bottom:40px}.header h1{font-size:2.5rem;font-weight:700;color:#1a1a1a;margin-bottom:8px;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.header p{font-size:1.1rem;color:#666;font-weight:400}.feedback-form{display:flex;flex-direction:column;gap:24px}.form-group{display:flex;flex-direction:column;gap:8px}.form-group label{font-weight:600;color:#1a1a1a;font-size:.95rem}.form-group select,.form-group textarea{padding:16px;border:2px solid #e1e5e9;border-radius:12px;font-size:1rem;font-family:inherit;transition:all .3s ease;background:#fafbfc}.form-group select:focus,.form-group textarea:focus{outline:none;border-color:#667eea;background:white;box-shadow:0 0 0 4px rgba(102,126,234,.1)}.form-group select{cursor:pointer;appearance:none;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");background-position:right 12px center;background-repeat:no-repeat;background-size:16px;padding-right:40px}.form-group textarea{resize:vertical;min-height:120px;line-height:1.6}.char-count{text-align:right;font-size:.85rem;color:#666;margin-top:4px}.submit-btn{background:linear-gradient(135deg,#667eea,#764ba2);color:white;border:none;padding:16px 32px;border-radius:12px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:8px;min-height:56px}.submit-btn:hover{transform:translateY(-2px);box-shadow:0 10px 25px rgba(102,126,234,.3)}.submit-btn:active{transform:translateY(0)}.submit-btn:disabled{opacity:.7;cursor:not-allowed;transform:none}.spinner{width:20px;height:20px;animation:spin 1s linear infinite}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content{background:white;padding:40px;border-radius:20px;text-align:center;max-width:400px;width:90%;box-shadow:0 20px 40px rgba(0,0,0,.2);animation:modalSlideIn .3s ease-out}@keyframes modalSlideIn{from{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.success-icon{font-size:4rem;margin-bottom:20px;animation:bounce .6s ease-out}@keyframes bounce{0%,20%,50%,80%,100%{transform:translateY(0)}40%{transform:translateY(-10px)}60%{transform:translateY(-5px)}}.modal-content h2{font-size:1.8rem;font-weight:700;color:#1a1a1a;margin-bottom:12px}.modal-content p{font-size:1.1rem;color:#666;margin-bottom:8px}.modal-content .sub-text{font-size:.95rem;color:#888;margin-bottom:24px}.modal-btn{background:linear-gradient(135deg,#667eea,#764ba2);color:white;border:none;padding:12px 24px;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease}.modal-btn:hover{transform:translateY(-1px);box-shadow:0 5px 15px rgba(102,126,234,.3)}@media (max-width:768px){.form-card{padding:30px 20px;margin:10px}.header h1{font-size:2rem}.header p{font-size:1rem}.submit-btn{padding:14px 24px;font-size:1rem}.modal-content{padding:30px 20px}}@media (max-width:480px){.form-card{padding:25px 15px}.header h1{font-size:1.8rem}.form-group select,.form-group textarea{padding:14px}}@keyframes slideIn{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}@keyframes slideOut{from{transform:translateX(0);opacity:1}to{transform:translateX(100%);opacity:0}}
    </style>
</head>
<body>
    <div class="container">
        <div class="form-card">
            <div class="header">
                <h1>한국역사연표</h1>
                <p>소중한 의견을 들려주세요</p>
            </div>
            
            <form id="feedbackForm" class="feedback-form">
                <div class="form-group">
                    <label for="category">분류</label>
                    <select id="category" name="category" required>
                        <option value="">분류를 선택해주세요</option>
                        <option value="bug">🐛 버그 및 오류신고</option>
                        <option value="feature">✨ 추가요청</option>
                        <option value="case">💡 활용사례</option>
                        <option value="general">💬 자유의견</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="message">의견 내용</label>
                    <textarea 
                        id="message" 
                        name="message" 
                        placeholder="의견이나 제안사항을 자유롭게 작성해주세요..."
                        rows="6"
                        required
                    ></textarea>
                    <div class="char-count">
                        <span id="charCount">0</span>/1000
                    </div>
                </div>
                
                <button type="submit" class="submit-btn" id="submitBtn">
                    <span class="btn-text">보내기</span>
                    <span class="btn-loading" style="display: none;">
                        <svg class="spinner" viewBox="0 0 24 24">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-dasharray="31.416" stroke-dashoffset="31.416">
                                <animate attributeName="stroke-dasharray" dur="2s" values="0 31.416;15.708 15.708;0 31.416" repeatCount="indefinite"/>
                                <animate attributeName="stroke-dashoffset" dur="2s" values="0;-15.708;-31.416" repeatCount="indefinite"/>
                            </circle>
                        </svg>
                        전송 중...
                    </span>
                </button>
            </form>
        </div>
        
        <div id="successModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="success-icon">✅</div>
                <h2>전송 완료!</h2>
                <p>개발자에게 발송되었습니다.</p>
                <p class="sub-text">소중한 의견 감사합니다.</p>
                <button class="modal-btn" onclick="closeModal()">확인</button>
            </div>
        </div>
    </div>
    
    <script>
        const f=document.getElementById('feedbackForm'),c=document.getElementById('category'),m=document.getElementById('message'),cc=document.getElementById('charCount'),s=document.getElementById('submitBtn'),bt=s.querySelector('.btn-text'),bl=s.querySelector('.btn-loading'),sm=document.getElementById('successModal'),u='https://hooks.slack.com/services/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',l=1000;m.addEventListener('input',function(){const t=this.value.length;cc.textContent=t;cc.style.color=t>l?'#ef4444':'#666';this.style.borderColor=t>l?'#ef4444':'#e1e5e9'});f.addEventListener('submit',async function(e){e.preventDefault();const cat=c.value,msg=m.value.trim();if(!cat){showE('분류를 선택해주세요.');c.focus();return}if(!msg){showE('의견 내용을 입력해주세요.');m.focus();return}if(msg.length>l){showE(`의견 내용은 ${l}자를 초과할 수 없습니다.`);m.focus();return}setL(true);try{await sendS(cat,msg);showM();f.reset();cc.textContent='0'}catch(e){console.error('전송 실패:',e);showE('전송 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요.')}finally{setL(false)}});async function sendS(cat,msg){const cl={'bug':'🐛 버그 및 오류신고','feature':'✨ 추가요청','case':'💡 활용사례','general':'💬 자유의견'},sm={text:'새로운 고객의견이 접수되었습니다!',blocks:[{type:'header',text:{type:'plain_text',text:'📝 새로운 고객의견',emoji:true}},{type:'section',fields:[{type:'mrkdwn',text:`*분류:*\n${cl[cat]}`},{type:'mrkdwn',text:`*접수 시간:*\n${new Date().toLocaleString('ko-KR')}`}]},{type:'section',text:{type:'mrkdwn',text:`*의견 내용:*\n\`\`\`${msg}\`\`\``}},{type:'divider'}]};const r=await fetch(u,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(sm)});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return r}function setL(l){s.disabled=l;bt.style.display=l?'none':'block';bl.style.display=l?'flex':'none'}function showM(){sm.style.display='flex';document.body.style.overflow='hidden'}function closeModal(){sm.style.display='none';document.body.style.overflow='auto'}sm.addEventListener('click',function(e){if(e.target===sm)closeModal()});document.addEventListener('keydown',function(e){if(e.key==='Escape'&&sm.style.display==='flex')closeModal()});function showE(msg){const t=document.createElement('div');t.style.cssText='position:fixed;top:20px;right:20px;background:#ef4444;color:white;padding:12px 20px;border-radius:8px;font-weight:500;z-index:1001;animation:slideIn .3s ease-out;box-shadow:0 4px 12px rgba(0,0,0,.15)';t.textContent=msg;document.body.appendChild(t);setTimeout(()=>{t.style.animation='slideOut .3s ease-out';setTimeout(()=>{if(t.parentNode)t.parentNode.removeChild(t)},300)},3000)}
    </script>
</body>
</html>
